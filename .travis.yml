services:
  - docker
script:
  - docker-compose build
  - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
  - docker push guamulo/dockerimagesave:${TRAVIS_BUILD_NUMBER}
  - id=$(docker create guamulo/dockerimagesave:${TRAVIS_BUILD_NUMBER})
  - docker cp ${id}:/go/src/github.com/jadolg/DockerImageSave/DockerImageSave .
  - docker cp ${id}:/go/src/github.com/jadolg/DockerImageSave/DockerImageSave.exe .
  - docker rm -v ${id}
